<!DOCTYPE html>
<html lang="pt"><head>
<script src="Aula5_files/libs/clipboard/clipboard.min.js"></script>
<script src="Aula5_files/libs/quarto-html/tabby.min.js"></script>
<script src="Aula5_files/libs/quarto-html/popper.min.js"></script>
<script src="Aula5_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Aula5_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Aula5_files/libs/quarto-html/light-border.css" rel="stylesheet">
<link href="Aula5_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.42">

  <meta name="dcterms.date" content="2026-04-10">
  <title>Regressão Linear Múltipla</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Aula5_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Aula5_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="Aula5_files/libs/revealjs/dist/theme/quarto-f1692b36d0a3acdc10f98b7915f5acdb.css">
  <link href="Aula5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Aula5_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Aula5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Aula5_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Regressão Linear Múltipla</h1>

<div class="quarto-title-authors">
</div>

  <p class="date">2026-04-10</p>
</section>
<section id="porquê-regressão-linear-múltipla" class="slide level2">
<h2>Porquê regressão linear <strong>múltipla</strong>?</h2>
<ul>
<li><strong>Fenómenos multicausais</strong>: fenómenos reais raramente dependem de uma única variável.</li>
<li><strong>Melhor predição</strong>: ao considerar variáveis relevantes reduzimos erro de predição.</li>
<li><strong>Separar efeitos</strong>: pretendemos isolar o impacto de cada variável <strong>mantendo as outras constantes</strong>.</li>
<li><strong>Interações</strong>: o efeito de uma variável pode <strong>depender</strong> do nível de outra (ex.: efeito do treino depende da dieta).</li>
</ul>
</section>
<section id="modelo-forma-escalar-e-matricial" class="slide level2">
<h2>Modelo: forma escalar e matricial</h2>
<p>Dados <span class="math inline">\((y_i, x_{i1},\dots,x_{ip})\)</span>, <span class="math inline">\(i=1,\dots,n\)</span>: <span class="math display">\[
y_i \;=\; \beta_0 + \beta_1 x_{i1} + \cdots + \beta_p x_{ip} + \varepsilon_i,
\]</span></p>
<p><span class="math inline">\(\mathbb E[\varepsilon_i]=0,\;
\mathrm{Var}(\varepsilon_i)=\sigma^2,\;
\mathrm{Cov}(\varepsilon)=0.\)</span></p>
<p><br>
</p>
<p>Notação matricial: <span class="math inline">\(\mathbf y = X\beta + \varepsilon\)</span>, <span class="math inline">\(\varepsilon \sim (0,\sigma^2 I)\)</span>.</p>
</section>
<section class="slide level2">

<p><strong>MMQ (OLS)</strong>: <span class="math inline">\(\hat\beta = (X^\top X)^{-1}X^\top \mathbf y\)</span>.<br>
Interpretação de <span class="math inline">\(\beta_j\)</span>: variação <strong>média</strong> em <span class="math inline">\(Y\)</span> por <strong>unidade</strong> de <span class="math inline">\(X_j\)</span>, <strong>mantendo</strong> as restantes fixas.</p>
<p>O estimador MMQ <span class="math display">\[
  \hat\beta=(X^\top X)^{-1}X^\top y
  \]</span> só existe (e é único) se <span class="math inline">\(X^\top X\)</span> for invertível ⇒ colunas de <span class="math inline">\(X\)</span> <strong>linearmente independentes</strong>.</p>
</section>
<section id="pressupostos-sobre-os-erros" class="slide level2">
<h2>Pressupostos sobre os <strong>erros</strong></h2>
<ol type="1">
<li><p><strong>Média zero</strong><br>
<span class="math inline">\(E[\varepsilon\mid X]=0\)</span></p></li>
<li><p><strong>Homocedasticidade (variância constante)</strong><br>
<span class="math inline">\(\operatorname{Var}(\varepsilon\mid X)=\sigma^2\)</span></p></li>
<li><p><strong>Independência / ausência de autocorrelação</strong><br>
<span class="math inline">\(\operatorname{Cov}(\varepsilon_i,\varepsilon_j\mid X)=0\ (i\neq j)\)</span></p></li>
</ol>
</section>
<section id="o-que-esperar-dos-resíduos-se-ols-é-adequado" class="slide level2">
<h2>O que esperar dos resíduos se OLS é adequado</h2>
<ul>
<li><span class="math inline">\(\sum_i \hat{\varepsilon}_i=0\)</span> (modelo com intercept).<br>
</li>
<li><span class="math inline">\(X^\top \hat{\varepsilon} = 0\)</span> (resíduos ortogonais aos regressores).<br>
</li>
<li>Resíduos vs ajustados: <strong>sem padrão</strong> e variância aproximadamente constante.<br>
</li>
<li>QQ-plot: pontos próximos da reta (se normalidade).</li>
</ul>
</section>
<section id="exemplo-a-mtcars-consumo-vs-massa-potência-e-caixa" class="slide level2">
<h2>Exemplo A : <code>mtcars</code> — consumo vs massa, potência e caixa</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href=""></a><span class="fu">data</span>(mtcars)</span>
<span id="cb1-2"><a href=""></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-3"><a href=""></a><span class="fu">library</span>(broom)</span>
<span id="cb1-4"><a href=""></a>mt <span class="ot">&lt;-</span> mtcars <span class="sc">|&gt;</span></span>
<span id="cb1-5"><a href=""></a>  <span class="fu">mutate</span>(<span class="at">am =</span> <span class="fu">factor</span>(am, <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"auto"</span>,<span class="st">"manual"</span>)),</span>
<span id="cb1-6"><a href=""></a>         <span class="at">wt_kg =</span> wt <span class="sc">*</span> <span class="fl">453.592</span> <span class="sc">/</span> <span class="dv">1000</span>)  <span class="co"># wt em milhares de libras; converter para kg</span></span>
<span id="cb1-7"><a href=""></a>modA <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">+</span> hp <span class="sc">+</span> am, <span class="at">data =</span> mt)</span>
<span id="cb1-8"><a href=""></a><span class="fu">summary</span>(modA)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = mpg ~ wt_kg + hp + am, data = mt)

Residuals:
    Min      1Q  Median      3Q     Max 
-3.4221 -1.7924 -0.3788  1.2249  5.5317 

Coefficients:
             Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept) 34.002875   2.642659  12.867 2.82e-13 ***
wt_kg       -6.346178   1.995120  -3.181 0.003574 ** 
hp          -0.037479   0.009605  -3.902 0.000546 ***
ammanual     2.083710   1.376420   1.514 0.141268    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 2.538 on 28 degrees of freedom
Multiple R-squared:  0.8399,    Adjusted R-squared:  0.8227 
F-statistic: 48.96 on 3 and 28 DF,  p-value: 2.908e-11</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href=""></a><span class="fu">tidy</span>(modA, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 7
  term        estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)  34.0      2.64        12.9  2.82e-13  28.6      39.4   
2 wt_kg        -6.35     2.00        -3.18 3.57e- 3 -10.4      -2.26  
3 hp           -0.0375   0.00961     -3.90 5.46e- 4  -0.0572   -0.0178
4 ammanual      2.08     1.38         1.51 1.41e- 1  -0.736     4.90  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href=""></a><span class="fu">glance</span>(modA)[, <span class="fu">c</span>(<span class="st">"r.squared"</span>,<span class="st">"adj.r.squared"</span>,<span class="st">"sigma"</span>)]</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 3
  r.squared adj.r.squared sigma
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;
1     0.840         0.823  2.54</code></pre>
</div>
</div>
<p><strong>Interpretação.</strong><br>
- <strong>wt_kg</strong>: variação média de <strong>mpg</strong> por +1 kg, <strong>controlando</strong> hp e am (espera-se coeficiente negativo).<br>
- <strong>hp</strong>: efeito parcial de potência (mpg ↓ quando hp ↑, dado wt e am fixos).<br>
- <strong>am</strong>: diferença média entre <strong>manual</strong> e <strong>auto</strong>, para os mesmos wt_kg e hp.<br>
- <span class="math inline">\(R^2\)</span> ajustado e <span class="math inline">\(\hat\sigma\)</span> medem qualidade do ajuste e dispersão residual.</p>
</section>
<section id="efeitos-marginais-e-previsões-com-incerteza" class="slide level2">
<h2>Efeitos marginais e previsões com incerteza</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href=""></a><span class="co"># Grella para explorar efeito de wt_kg mantendo hp, am fixos</span></span>
<span id="cb7-2"><a href=""></a>grid_wt <span class="ot">&lt;-</span> mt <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href=""></a>  <span class="fu">summarize</span>(<span class="at">hp =</span> <span class="fu">median</span>(hp), <span class="at">am =</span> am[<span class="dv">1</span>]) <span class="sc">|&gt;</span></span>
<span id="cb7-4"><a href=""></a>  <span class="fu">crossing</span>(<span class="at">wt_kg =</span> <span class="fu">seq</span>(<span class="fu">min</span>(mt<span class="sc">$</span>wt_kg), <span class="fu">max</span>(mt<span class="sc">$</span>wt_kg), <span class="at">length.out =</span> <span class="dv">50</span>))</span>
<span id="cb7-5"><a href=""></a></span>
<span id="cb7-6"><a href=""></a>pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(modA, <span class="at">newdata =</span> grid_wt, <span class="at">interval =</span> <span class="st">"confidence"</span>)</span>
<span id="cb7-7"><a href=""></a>pred_p <span class="ot">&lt;-</span> <span class="fu">predict</span>(modA, <span class="at">newdata =</span> grid_wt, <span class="at">interval =</span> <span class="st">"prediction"</span>)</span>
<span id="cb7-8"><a href=""></a></span>
<span id="cb7-9"><a href=""></a><span class="fu">bind_cols</span>(grid_wt, <span class="fu">as_tibble</span>(pred), <span class="fu">tibble</span>(<span class="at">lwr_pred =</span> pred_p[,<span class="dv">3</span>], <span class="at">upr_pred =</span> pred_p[,<span class="dv">3</span>])) <span class="sc">|&gt;</span> <span class="fu">head</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 8
     hp am     wt_kg   fit   lwr   upr lwr_pred upr_pred
  &lt;dbl&gt; &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;
1   123 manual 0.686  27.1  25.0  29.3     32.8     32.8
2   123 manual 0.722  26.9  24.8  28.9     32.5     32.5
3   123 manual 0.759  26.7  24.7  28.6     32.2     32.2
4   123 manual 0.795  26.4  24.6  28.3     32.0     32.0
5   123 manual 0.831  26.2  24.4  28.0     31.7     31.7
6   123 manual 0.867  26.0  24.3  27.7     31.4     31.4</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href=""></a>pred_df <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(grid_wt, <span class="fu">as_tibble</span>(pred)) <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href=""></a>  <span class="fu">rename</span>(<span class="at">fit=</span>fit, <span class="at">lwr=</span>lwr, <span class="at">upr=</span>upr)</span>
<span id="cb9-3"><a href=""></a></span>
<span id="cb9-4"><a href=""></a><span class="fu">ggplot</span>(pred_df, <span class="fu">aes</span>(wt_kg, fit)) <span class="sc">+</span></span>
<span id="cb9-5"><a href=""></a>  <span class="fu">geom_ribbon</span>(<span class="fu">aes</span>(<span class="at">ymin=</span>lwr, <span class="at">ymax=</span>upr), <span class="at">alpha=</span>.<span class="dv">2</span>) <span class="sc">+</span></span>
<span id="cb9-6"><a href=""></a>  <span class="fu">geom_line</span>(<span class="at">linewidth=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb9-7"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Massa (kg)"</span>, <span class="at">y=</span><span class="st">"mpg (média prevista)"</span>,</span>
<span id="cb9-8"><a href=""></a>       <span class="at">title=</span><span class="st">"Efeito marginal de wt_kg com IC da média (95%) — hp e am fixos"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Aula5_files/figure-revealjs/unnamed-chunk-3-1.png" width="192" class="r-stretch"><p><strong>Leitura.</strong> Banda é <strong>IC da média</strong>; intervalo de <strong>predição</strong> seria mais largo (variação individual).</p>
</section>
<section id="diagnóstico-e-robustez-resíduos-qq-distância-de-cook" class="slide level2">
<h2>Diagnóstico e robustez: resíduos, QQ, distância de Cook</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>))</span>
<span id="cb10-2"><a href=""></a><span class="fu">plot</span>(modA, <span class="at">which =</span> <span class="dv">1</span>)</span>
<span id="cb10-3"><a href=""></a><span class="fu">plot</span>(modA, <span class="at">which =</span> <span class="dv">2</span>)</span>
<span id="cb10-4"><a href=""></a><span class="fu">plot</span>(modA, <span class="at">which =</span> <span class="dv">5</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>

<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<img data-src="Aula5_files/figure-revealjs/unnamed-chunk-4-1.png" width="864" class="r-stretch"></section>
<section id="multicolinearidade-vif-e-interpretação" class="slide level2">
<h2>Multicolinearidade: VIF e interpretação</h2>
<ul>
<li>VIF (Variance Inflation Factor) mede quanto a <strong>variância</strong> de <span class="math inline">\(\hat\beta_j\)</span> é <strong>inflacionada</strong> pela colinearidade de <span class="math inline">\(X_j\)</span> com os restantes.</li>
<li>Definição via regressão auxiliar de <span class="math inline">\(X_j\)</span> nas outras preditoras <span class="math inline">\(X_{-j}\)</span>: <span class="math display">\[
\text{VIF}_j \;=\; \frac{1}{1-R_j^2},
\qquad
R_j^2 \;=\; R^2\Big(\,X_j \sim X_{-j}\,\Big).
\]</span></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li>Relação com a variância de <span class="math inline">\(\hat\beta_j\)</span>: <span class="math display">\[
\operatorname{Var}(\hat\beta_j)
\;=\;
\sigma^2\,\frac{\text{VIF}_j}{\sum_i (x_{ij}-\bar x_j)^2}.
\]</span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href=""></a><span class="fu">library</span>(car)</span>
<span id="cb12-2"><a href=""></a></span>
<span id="cb12-3"><a href=""></a>mod <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt <span class="sc">+</span> hp, <span class="at">data =</span> mtcars)</span>
<span id="cb12-4"><a href=""></a>car<span class="sc">::</span><span class="fu">vif</span>(mod)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      wt       hp 
1.766625 1.766625 </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<ul>
<li><strong>Regra prática:</strong>
<ul>
<li>VIF ≈ 1: sem colinearidade relevante<br>
</li>
<li>VIF ≳ 5 (às vezes 10): <strong>preocupante</strong> → investigar/reparametrizar</li>
</ul></li>
<li><strong>Efeito:</strong> VIF alto ⇒ <strong>erros-padrão grandes</strong>, ICs <strong>largos</strong>, sinais/valores de <span class="math inline">\(\hat\beta\)</span> podem oscilar com pequenas mudanças nos dados.</li>
</ul>
</section>
<section id="fatores" class="slide level2">
<h2>Fatores</h2>
<ul>
<li><p>Em <code>lm(mpg ~ wt_kg + hp + am)</code>, onde <code>am</code> é <strong>fator</strong> com níveis <code>"auto"</code> e <code>"manual"</code>, o R cria <strong>variáveis indicadoras</strong> (0/1) para representar os níveis.</p>
<p>→ Um nível fica como <strong>base</strong> (escolhido automaticamente, tipicamente o primeiro); os restantes têm um <strong>coeficiente</strong> que mede o desvio face a essa base.</p></li>
<li><p><strong>Como ler os coeficientes</strong> (sem interações):</p>
<ul>
<li><code>ammanual</code>: <strong>diferença média</strong> (<em>manual − base</em>) em <code>mpg</code>, <strong>mantendo</strong> <code>wt_kg</code> e <code>hp</code> fixos.<br>
Ex.: <code>ammanual = 2.5</code> ⇒ carros <em>manuais</em> têm <strong>+2.5 mpg</strong> face à base para o mesmo peso e potência.</li>
</ul></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href=""></a><span class="fu">coef</span>(<span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">+</span> hp <span class="sc">+</span> am, <span class="at">data =</span> mt))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>(Intercept)       wt_kg          hp    ammanual 
34.00287512 -6.34617765 -0.03747873  2.08371013 </code></pre>
</div>
</div>
</section>
<section id="interações-quando-o-efeito-depende-de-outra-variável" class="slide level2">
<h2>Interações: quando o efeito depende de outra variável</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href=""></a>modA_int <span class="ot">&lt;-</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">*</span> am <span class="sc">+</span> hp, <span class="at">data =</span> mt)</span>
<span id="cb16-2"><a href=""></a><span class="fu">tidy</span>(modA_int, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 × 7
  term           estimate std.error statistic  p.value conf.low conf.high
  &lt;chr&gt;             &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;    &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)     30.9      2.72        11.4  8.55e-12  25.4     36.5    
2 wt_kg           -5.55     1.86        -2.98 6.05e- 3  -9.37    -1.73   
3 ammanual        11.6      4.02         2.87 7.84e- 3   3.30    19.8    
4 hp              -0.0269   0.00980     -2.75 1.05e- 2  -0.0470  -0.00685
5 wt_kg:ammanual  -7.89     3.18        -2.48 1.97e- 2 -14.4     -1.36   </code></pre>
</div>
</div>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href=""></a><span class="co"># Visualizar duas retas (auto vs manual) em função de wt_kg</span></span>
<span id="cb18-2"><a href=""></a>new_auto   <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">wt_kg =</span> <span class="fu">seq</span>(<span class="fu">min</span>(mt<span class="sc">$</span>wt_kg), <span class="fu">max</span>(mt<span class="sc">$</span>wt_kg), <span class="at">length.out=</span><span class="dv">50</span>),</span>
<span id="cb18-3"><a href=""></a>                     <span class="at">hp =</span> <span class="fu">median</span>(mt<span class="sc">$</span>hp), <span class="at">am =</span> <span class="fu">factor</span>(<span class="st">"auto"</span>, <span class="at">levels=</span><span class="fu">levels</span>(mt<span class="sc">$</span>am)))</span>
<span id="cb18-4"><a href=""></a>new_manual <span class="ot">&lt;-</span> new_auto; new_manual<span class="sc">$</span>am <span class="ot">&lt;-</span> <span class="fu">factor</span>(<span class="st">"manual"</span>, <span class="at">levels=</span><span class="fu">levels</span>(mt<span class="sc">$</span>am))</span>
<span id="cb18-5"><a href=""></a></span>
<span id="cb18-6"><a href=""></a>pred_auto   <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(new_auto,   <span class="fu">as_tibble</span>(<span class="fu">predict</span>(modA_int, new_auto, <span class="at">interval=</span><span class="st">"confidence"</span>)))</span>
<span id="cb18-7"><a href=""></a>pred_manual <span class="ot">&lt;-</span> <span class="fu">bind_cols</span>(new_manual, <span class="fu">as_tibble</span>(<span class="fu">predict</span>(modA_int, new_manual, <span class="at">interval=</span><span class="st">"confidence"</span>)))</span>
<span id="cb18-8"><a href=""></a></span>
<span id="cb18-9"><a href=""></a><span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb18-10"><a href=""></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>pred_auto, <span class="fu">aes</span>(wt_kg, <span class="at">ymin=</span>lwr, <span class="at">ymax=</span>upr), <span class="at">alpha=</span>.<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href=""></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>pred_auto, <span class="fu">aes</span>(wt_kg, fit), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-12"><a href=""></a>  <span class="fu">geom_ribbon</span>(<span class="at">data=</span>pred_manual, <span class="fu">aes</span>(wt_kg, <span class="at">ymin=</span>lwr, <span class="at">ymax=</span>upr), <span class="at">alpha=</span>.<span class="dv">15</span>) <span class="sc">+</span></span>
<span id="cb18-13"><a href=""></a>  <span class="fu">geom_line</span>(<span class="at">data=</span>pred_manual, <span class="fu">aes</span>(wt_kg, fit), <span class="at">size=</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb18-14"><a href=""></a>  <span class="fu">labs</span>(<span class="at">x=</span><span class="st">"Massa (kg)"</span>, <span class="at">y=</span><span class="st">"mpg previsto"</span>,</span>
<span id="cb18-15"><a href=""></a>       <span class="at">title=</span><span class="st">"Interação wt_kg × am: inclinações distintas por tipo de caixa"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Aula5_files/figure-revealjs/unnamed-chunk-8-1.png" width="672" class="r-stretch"><p><strong>Leitura.</strong> Se o termo de interação é significativo, o <strong>efeito de wt_kg</strong> difere entre <code>auto</code> e <code>manual</code>.</p>
</section>
<section id="exemplo-b-aplicação-socioeconómica-swiss" class="slide level2">
<h2>Exemplo B (aplicação socioeconómica): <code>swiss</code></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href=""></a><span class="fu">data</span>(swiss)</span>
<span id="cb19-2"><a href=""></a>modS <span class="ot">&lt;-</span> <span class="fu">lm</span>(Fertility <span class="sc">~</span> Agriculture <span class="sc">+</span> Examination <span class="sc">+</span> Education <span class="sc">+</span> Catholic <span class="sc">+</span> Infant.Mortality,</span>
<span id="cb19-3"><a href=""></a>           <span class="at">data =</span> swiss)</span>
<span id="cb19-4"><a href=""></a><span class="fu">summary</span>(modS)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Call:
lm(formula = Fertility ~ Agriculture + Examination + Education + 
    Catholic + Infant.Mortality, data = swiss)

Residuals:
     Min       1Q   Median       3Q      Max 
-15.2743  -5.2617   0.5032   4.1198  15.3213 

Coefficients:
                 Estimate Std. Error t value Pr(&gt;|t|)    
(Intercept)      66.91518   10.70604   6.250 1.91e-07 ***
Agriculture      -0.17211    0.07030  -2.448  0.01873 *  
Examination      -0.25801    0.25388  -1.016  0.31546    
Education        -0.87094    0.18303  -4.758 2.43e-05 ***
Catholic          0.10412    0.03526   2.953  0.00519 ** 
Infant.Mortality  1.07705    0.38172   2.822  0.00734 ** 
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 7.165 on 41 degrees of freedom
Multiple R-squared:  0.7067,    Adjusted R-squared:  0.671 
F-statistic: 19.76 on 5 and 41 DF,  p-value: 5.594e-10</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href=""></a><span class="fu">tidy</span>(modS, <span class="at">conf.int =</span> <span class="cn">TRUE</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 7
  term             estimate std.error statistic     p.value conf.low conf.high
  &lt;chr&gt;               &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;       &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
1 (Intercept)        66.9     10.7         6.25 0.000000191  45.3      88.5   
2 Agriculture        -0.172    0.0703     -2.45 0.0187       -0.314    -0.0301
3 Examination        -0.258    0.254      -1.02 0.315        -0.771     0.255 
4 Education          -0.871    0.183      -4.76 0.0000243    -1.24     -0.501 
5 Catholic            0.104    0.0353      2.95 0.00519       0.0329    0.175 
6 Infant.Mortality    1.08     0.382       2.82 0.00734       0.306     1.85  </code></pre>
</div>
</div>
<p><strong>Interpretação.</strong><br>
- Sinal de <code>Education</code> (negativo) sugere menor fertilidade em regiões com mais educação, <strong>controlando</strong> restantes.<br>
- <code>Catholic</code> positivo: efeito marginal mantendo o resto. <strong>Cuidado</strong>: correlação entre preditores muda a interpretação.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href=""></a><span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>)); <span class="fu">plot</span>(modS, <span class="at">which=</span><span class="dv">1</span>); <span class="fu">plot</span>(modS, <span class="at">which=</span><span class="dv">2</span>); <span class="fu">plot</span>(modS, <span class="at">which=</span><span class="dv">5</span>); <span class="fu">par</span>(<span class="at">mfrow=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">1</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="Aula5_files/figure-revealjs/unnamed-chunk-10-1.png" width="672" class="r-stretch"></section>
<section id="coeficientes-padronizados" class="slide level2">
<h2>Coeficientes padronizados</h2>
<ul>
<li>Coeficientes <strong>padronizados</strong> permitem comparar magnitudes relativas.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href=""></a>swiss_z <span class="ot">&lt;-</span> swiss <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">everything</span>(), scale))</span>
<span id="cb24-2"><a href=""></a><span class="fu">coef</span>(<span class="fu">lm</span>(Fertility <span class="sc">~</span> . , <span class="at">data =</span> swiss_z))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     (Intercept)      Agriculture      Examination        Education 
   -1.335093e-15    -3.129213e-01    -1.647782e-01    -6.704008e-01 
        Catholic Infant.Mortality 
    3.476000e-01     2.511360e-01 </code></pre>
</div>
</div>
</section>
<section id="aic-e-bic-critérios-de-seleção-de-modelos" class="slide level2">
<h2>AIC e BIC — critérios de seleção de modelos</h2>
<ul>
<li><p>Ideia: equilibrar <strong>qualidade de ajustamento</strong> (log-verosimilhança) e <strong>complexidade</strong> (nº de parâmetros <span class="math inline">\(k\)</span>).</p></li>
<li><p>Definições gerais: <span class="math display">\[
\mathrm{AIC} \;=\; -2\log L(\hat\theta) \;+\; 2k,
\qquad
\mathrm{BIC} \;=\; -2\log L(\hat\theta) \;+\; k\log n.
\]</span> <strong>AIC</strong> (Akaike Information Criterion) privilegia <strong>previsão</strong> (penalização <span class="math inline">\(2k\)</span>);</p></li>
</ul>
<p><strong>BIC</strong> favorece <strong>parcimónia</strong> (penalização <span class="math inline">\(k\log n\)</span>).</p>
</section>
<section class="slide level2">

<p><strong>Como usar</strong> - <strong>Quanto menor, melhor</strong> (AIC/BIC em valores absolutos não têm significado isolado).<br>
- Compare <strong>modelos ajustados aos mesmos dados</strong>; não é preciso serem aninhados.</p>
<p><strong>Notas</strong></p>
<ul>
<li>Preferir <strong>AIC</strong> se o objetivo principal é <strong>previsão</strong>.<br>
</li>
<li>Preferir <strong>BIC</strong> se privilegia <strong>simplicidade</strong>/interpretação (penaliza mais o número de parâmetros).<br>
</li>
<li>Não substitui <strong>diagnóstico</strong> do modelo (resíduos, colinearidade, etc.).</li>
</ul>
</section>
<section class="slide level2">

<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href=""></a>mods <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb26-2"><a href=""></a>  <span class="at">base  =</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> <span class="dv">1</span>, <span class="at">data =</span> mt),</span>
<span id="cb26-3"><a href=""></a>  <span class="at">pars  =</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">+</span> hp, <span class="at">data =</span> mt),</span>
<span id="cb26-4"><a href=""></a>  <span class="at">int   =</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">*</span> am <span class="sc">+</span> hp, <span class="at">data =</span> mt),</span>
<span id="cb26-5"><a href=""></a>  <span class="at">full  =</span> <span class="fu">lm</span>(mpg <span class="sc">~</span> wt_kg <span class="sc">+</span> hp <span class="sc">+</span> am <span class="sc">+</span> qsec <span class="sc">+</span> gear, <span class="at">data =</span> mt)</span>
<span id="cb26-6"><a href=""></a>)</span>
<span id="cb26-7"><a href=""></a><span class="fu">tibble</span>(<span class="at">modelo =</span> <span class="fu">names</span>(mods),</span>
<span id="cb26-8"><a href=""></a>       <span class="at">AIC =</span> <span class="fu">sapply</span>(mods, AIC),</span>
<span id="cb26-9"><a href=""></a>       <span class="at">BIC =</span> <span class="fu">sapply</span>(mods, BIC))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 × 3
  modelo   AIC   BIC
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 base    209.  212.
2 pars    157.  163.
3 int     152.  160.
4 full    156.  167.</code></pre>
</div>
</div>
</section>
<section id="boas-práticas" class="slide level2">
<h2>Boas práticas</h2>
<ol type="1">
<li>Verificar pressupostos pela análise dos resíduos.</li>
<li>Verificar <strong>pontos influentes</strong>.<br>
</li>
<li>Causalidade ≠ correlação.<br>
</li>
<li>Explicar coeficientes em <strong>unidades</strong> e <strong>cenários</strong> relevantes.<br>
</li>
<li>Quantificar incerteza: <strong>ICs</strong> e <strong>intervalos de predição</strong>.</li>
</ol>
</section>
<section id="exercício" class="slide level2">
<h2>Exercício</h2>
<ul>
<li>Ajustar <span class="math inline">\(\text{mpg} \sim \text{wt}_\text{kg} + \text{hp} + \text{am}\)</span> e reportar IC(95%) de cada coeficiente.<br>
</li>
<li>Testar a interação <span class="math inline">\(\text{wt}_\text{kg}:\text{am}\)</span> e interpretar o termo cruzado.<br>
</li>
<li>Em <code>swiss</code>, calcular VIFs e discutir colinearidade; refazer o modelo com variáveis padronizadas.<br>
</li>
<li>Construir um cenário de previsão com <strong>IC da média</strong> e <strong>intervalo de predição</strong>.</li>
</ul>

</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<div class="footer footer-default">

</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Aula5_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Aula5_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Aula5_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Aula5_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copiada");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copiada");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>